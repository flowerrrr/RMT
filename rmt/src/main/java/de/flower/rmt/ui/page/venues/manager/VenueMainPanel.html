<!DOCTYPE html>
<html xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd">
<body>

<wicket:panel>

    <div wicket:id="noEntry">
        <wicket:message key="manager.venues.noentry">[List is empty]</wicket:message>
    </div>
    <wicket:container wicket:id="container">
        <!-- the tabs -->
        <ul id="venue-tabs" class="nav nav-tabs">
            <li class="active"><a href="#list" data-toggle="tab">
                <wicket:message key="manager.venues.listview"/>
            </a></li>
            <li><a href="#map" data-toggle="tab">
                <wicket:message key="manager.venues.mapview"/>
            </a></li>
        </ul>

        <!-- tab "panes" -->
        <div class="tab-content">
            <div wicket:id="venueListPanel" id="list" class="tab-pane active"/>
            <div wicket:id="venuesMapPanel" id="map" class="tab-pane venues-map">[Map with venues]</div>
        </div>
        <script>
            // have to do some work to make map display correctly after it was rendered in a hidden div.
            // hook into bootstrap tab callback to resize the map when it is shown.
            $('a[data-toggle="tab"]').on('shown', function (e) {
                if (e.target.hash == "#map" && !VenuesMap.initialized) {
                    VenuesMap.repaint();
                    VenuesMap.initialized = true;
                }
            });
            VenuesMap = {
                initialized : false
            };
            VenuesMap.repaint = function() {
                var mapId = VenuesMap.getMapKey();
                google.maps.event.trigger(Wicket.maps[mapId].map, 'resize');
                // Wicket.maps[mapId].reCenter();
                Wicket.maps[mapId].map.fitBounds(Wicket.maps[mapId].bounds);
            };
            VenuesMap.getMapKey = function() {
                for (var key in Wicket.maps) {
                    return key;
                }
            }
        </script>

    </wicket:container>

</wicket:panel>


</body>
</html>